<!doctype html>
<html>
<head>
    <link href="resources/css/keeropkeer.css" type="text/css" rel="stylesheet">
    <title>X op X</title>
</head>
<body>
<div id="app">
    <div class="results">
        <div class="results-row">
            <div id="resultA" class="dice-result dice-result--number"></div>
            <div id="resultB" class="dice-result dice-result--number"></div>
            <div id="resultC" class="dice-result dice-result--number"></div>
        </div>
        <div class="results-row">
            <div id="resultX" class="dice-result"></div>
            <div id="resultY" class="dice-result"></div>
            <div id="resultZ" class="dice-result"></div>
        </div>
    </div>
    <div class="actions">
        <form action="">
            <button id="roll-button" class="roll-button">ROL</button>
        </form>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
    $(function () {
        var socket = io();
        $('form').submit(function (e) {
            console.log('TN: Sending roll all dice command');
            e.preventDefault(); // prevents page reloading
            socket.emit('cmd: roll all dice');
            return false;
        });
        socket.on('ev: all dice rolled', function (results) {
            console.log('TN: Received all dice rolled event: ' + JSON.stringify(results));

            $('#resultA').text(results.resultA);
            $('#resultB').text(results.resultB);
            $('#resultC').text(results.resultC);

            clearBgColor('resultX');
            clearBgColor('resultY');
            clearBgColor('resultZ');

            setDiceElementColor('resultX', results.resultX);
            setDiceElementColor('resultY', results.resultY);
            setDiceElementColor('resultZ', results.resultZ);
        });
    });

    function clearBgColor(elementId) {
        document.getElementById(elementId).classList.remove('bg-red', 'bg-orange', 'bg-yellow', 'bg-green', 'bg-blue', 'bg-black');
    }

    function setDiceElementColor(elementId, value) {
        let element = document.getElementById(elementId);
        element.innerText = value;
        element.classList.add('bg-' + value.toLowerCase());
    }
</script>
</body>
</html>